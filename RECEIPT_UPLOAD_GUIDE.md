# 收据上传功能使用指南

## 概述
收据上传功能允许用户为财务记录上传相关的收据文件，支持图片和PDF格式。

## 功能特性

### 支持的文件格式
- **图片格式**: JPG, JPEG, PNG, GIF, BMP, WebP
- **文档格式**: PDF
- **文件大小限制**: 最大10MB

### 上传流程

1. **选择文件**
   - 点击上传区域或"选择文件"按钮
   - 选择要上传的收据文件
   - 支持拖拽上传

2. **添加描述（可选）**
   - 为收据添加描述信息
   - 帮助识别和管理收据

3. **上传文件**
   - 点击"Upload"按钮开始上传
   - 文件会被转换为base64格式存储
   - 上传过程中显示"Uploading..."状态

4. **查看结果**
   - 上传成功后文件会出现在收据列表中
   - 可以预览、下载或删除收据

## 使用方法

### 在记录详情页面
1. 访问财务记录的详情页面
2. 在"Receipts"部分点击"Add Receipt"按钮
3. 选择要上传的文件
4. 添加描述（可选）
5. 点击"Upload"完成上传

### 在编辑记录页面
1. 访问编辑记录页面
2. 在收据上传部分选择文件
3. 添加描述（可选）
4. 点击"Upload"完成上传

## 常见问题

### 上传没有反应
- 检查文件大小是否超过10MB
- 确认文件格式是否支持
- 查看浏览器控制台是否有错误信息
- 确认网络连接正常

### 文字显示为白色
- 这个问题已经修复
- 如果仍有问题，请刷新页面重试

### 上传失败
- 检查Google Sheets API配置
- 确认用户权限
- 查看错误信息并重试

## 技术说明

### 存储方式
- 文件以base64格式存储在Google Sheets的"Receipt"工作表中
- 每个收据都有唯一的receiptKey
- 与财务记录通过transactionKey关联

### 权限要求
- 需要登录用户
- 某些操作需要管理员权限

### 数据同步
- 收据数据实时同步到Google Sheets
- 支持多用户同时操作

## 故障排除

### 调试信息
- 打开浏览器开发者工具
- 查看Console标签页的日志信息
- 检查Network标签页的API请求

### 常见错误
1. **"Missing required fields"**: 检查是否选择了文件
2. **"Google Sheet ID not configured"**: 检查环境变量配置
3. **"Failed to create receipt record"**: 检查Google Sheets权限

### 联系支持
如果遇到问题，请提供以下信息：
- 错误信息截图
- 浏览器控制台日志
- 操作步骤描述 